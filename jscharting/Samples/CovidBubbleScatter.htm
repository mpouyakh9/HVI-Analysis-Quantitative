<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Covid Bubble Scatter | JSCharting</title>
    <meta http-equiv="content-type" content="text-html; charset=utf-8" />

    <script type="text/javascript" src="../jsc/jscharting.js"></script>

    <script type="text/javascript" src="../jsc/modules/maps.js"></script>
    <script type="text/javascript" src="../jsc/modules/toolbar.js"></script>

    <link rel="stylesheet" type="text/css" href="css/default.css" />
    <style type="text/css">
      #dashWrapper {
        max-width: 700px;
        margin: 0px auto;
      }
      #chartTitle1,
      #chartTitle2,
      #chartTitle3,
      #chartTitle4,
      #chartTitle5 {
        padding-left: 10px;
        font-size: 16px;
        color: black;
        padding-bottom: 5px;
      }
    </style>
  </head>
  <body>
    <div id="dashWrapper">
      <div id="bubbleScatter" style="height: auto;">
        <div id="firstChartWrapper3" class="firstChartWrapper">
          <div id="chartTitle3" style="min-height: 24px;"></div>
          <div id="chartDiv3" style="height: 416px;"></div>
        </div>
        <div id="mapDiv3" style="height: 600px;"></div>
      </div>
    </div>

    <script type="text/javascript">
      /*
Animated bubble scatter chart showing COVID-19 active cases, confirmed cases and deaths by country over time.
Learn how to:

  - Make a dashboard scatter bubble chart.
*/
      // JS

      var dateCache = {};
      var tooltipPalette = [
        '#d53838', //Confirmed
        '#FF9800', //Active
        '#00C853', //Recovered
        '#212121',
      ];
      var countriesInfo = {
        Andorra: { flag: 'ðŸ‡¦ðŸ‡©', code: 'AD' },
        'United Arab Emirates': { flag: 'ðŸ‡¦ðŸ‡ª', code: 'AE' },
        Afghanistan: { flag: 'ðŸ‡¦ðŸ‡«', code: 'AF' },
        'Antigua and Barbuda': { flag: 'ðŸ‡¦ðŸ‡¬', code: 'AG' },
        Anguilla: { flag: 'ðŸ‡¦ðŸ‡®', code: 'AI' },
        Albania: { flag: 'ðŸ‡¦ðŸ‡±', code: 'AL' },
        Armenia: { flag: 'ðŸ‡¦ðŸ‡²', code: 'AM' },
        Angola: { flag: 'ðŸ‡¦ðŸ‡´', code: 'AO' },
        Antarctica: { flag: 'ðŸ‡¦ðŸ‡¶', code: 'AQ' },
        Argentina: { flag: 'ðŸ‡¦ðŸ‡·', code: 'AR' },
        'American Samoa': { flag: 'ðŸ‡¦ðŸ‡¸', code: 'AS' },
        Austria: { flag: 'ðŸ‡¦ðŸ‡¹', code: 'AT' },
        Australia: { flag: 'ðŸ‡¦ðŸ‡º', code: 'AU' },
        Aruba: { flag: 'ðŸ‡¦ðŸ‡¼', code: 'AW' },
        'Ã…land Islands': { flag: 'ðŸ‡¦ðŸ‡½', code: 'AX' },
        Azerbaijan: { flag: 'ðŸ‡¦ðŸ‡¿', code: 'AZ' },
        'Bosnia and Herzegovina': { flag: 'ðŸ‡§ðŸ‡¦', code: 'BA' },
        Barbados: { flag: 'ðŸ‡§ðŸ‡§', code: 'BB' },
        Bangladesh: { flag: 'ðŸ‡§ðŸ‡©', code: 'BD' },
        Belgium: { flag: 'ðŸ‡§ðŸ‡ª', code: 'BE' },
        'Burkina Faso': { flag: 'ðŸ‡§ðŸ‡«', code: 'BF' },
        Bulgaria: { flag: 'ðŸ‡§ðŸ‡¬', code: 'BG' },
        Bahrain: { flag: 'ðŸ‡§ðŸ‡­', code: 'BH' },
        Burundi: { flag: 'ðŸ‡§ðŸ‡®', code: 'BI' },
        Benin: { flag: 'ðŸ‡§ðŸ‡¯', code: 'BJ' },
        'Saint BarthÃ©lemy': { flag: 'ðŸ‡§ðŸ‡±', code: 'BL' },
        Bermuda: { flag: 'ðŸ‡§ðŸ‡²', code: 'BM' },
        Brunei: { flag: 'ðŸ‡§ðŸ‡³', code: 'BN' },
        Bolivia: { flag: 'ðŸ‡§ðŸ‡´', code: 'BO' },
        'Bonaire, Sint Eustatius and Saba': { flag: 'ðŸ‡§ðŸ‡¶', code: 'BQ' },
        Brazil: { flag: 'ðŸ‡§ðŸ‡·', code: 'BR' },
        Bahamas: { flag: 'ðŸ‡§ðŸ‡¸', code: 'BS' },
        Bhutan: { flag: 'ðŸ‡§ðŸ‡¹', code: 'BT' },
        'Bouvet Island': { flag: 'ðŸ‡§ðŸ‡»', code: 'BV' },
        Botswana: { flag: 'ðŸ‡§ðŸ‡¼', code: 'BW' },
        Belarus: { flag: 'ðŸ‡§ðŸ‡¾', code: 'BY' },
        Belize: { flag: 'ðŸ‡§ðŸ‡¿', code: 'BZ' },
        Canada: { flag: 'ðŸ‡¨ðŸ‡¦', code: 'CA' },
        'Cocos (Keeling) Islands': { flag: 'ðŸ‡¨ðŸ‡¨', code: 'CC' },
        'Congo (Kinshasa)': { flag: 'ðŸ‡¨ðŸ‡©', code: 'CD' },
        'Central African Republic': { flag: 'ðŸ‡¨ðŸ‡«', code: 'CF' },
        'Congo (Brazzaville)': { flag: 'ðŸ‡¨ðŸ‡¬', code: 'CG' },
        Switzerland: { flag: 'ðŸ‡¨ðŸ‡­', code: 'CH' },
        "Cote d'Ivoire": { flag: 'ðŸ‡¨ðŸ‡®', code: 'CI' },
        'Cook Islands': { flag: 'ðŸ‡¨ðŸ‡°', code: 'CK' },
        Chile: { flag: 'ðŸ‡¨ðŸ‡±', code: 'CL' },
        Cameroon: { flag: 'ðŸ‡¨ðŸ‡²', code: 'CM' },
        China: { flag: 'ðŸ‡¨ðŸ‡³', code: 'CN' },
        Colombia: { flag: 'ðŸ‡¨ðŸ‡´', code: 'CO' },
        'Costa Rica': { flag: 'ðŸ‡¨ðŸ‡·', code: 'CR' },
        Cuba: { flag: 'ðŸ‡¨ðŸ‡º', code: 'CU' },
        'Cabo Verde': { flag: 'ðŸ‡¨ðŸ‡»', code: 'CV' },
        CuraÃ§ao: { flag: 'ðŸ‡¨ðŸ‡¼', code: 'CW' },
        'Christmas Island': { flag: 'ðŸ‡¨ðŸ‡½', code: 'CX' },
        Cyprus: { flag: 'ðŸ‡¨ðŸ‡¾', code: 'CY' },
        Czechia: { flag: 'ðŸ‡¨ðŸ‡¿', code: 'CZ' },
        Germany: { flag: 'ðŸ‡©ðŸ‡ª', code: 'DE' },
        Djibouti: { flag: 'ðŸ‡©ðŸ‡¯', code: 'DJ' },
        Denmark: { flag: 'ðŸ‡©ðŸ‡°', code: 'DK' },
        Dominica: { flag: 'ðŸ‡©ðŸ‡²', code: 'DM' },
        'Dominican Republic': { flag: 'ðŸ‡©ðŸ‡´', code: 'DO' },
        'Cruise Ship': { flag: 'ðŸš¢' },
        Algeria: { flag: 'ðŸ‡©ðŸ‡¿', code: 'DZ' },
        Ecuador: { flag: 'ðŸ‡ªðŸ‡¨', code: 'EC' },
        Estonia: { flag: 'ðŸ‡ªðŸ‡ª', code: 'EE' },
        Egypt: { flag: 'ðŸ‡ªðŸ‡¬', code: 'EG' },
        'Western Sahara': { flag: 'ðŸ‡ªðŸ‡­', code: 'EH' },
        Eritrea: { flag: 'ðŸ‡ªðŸ‡·', code: 'ER' },
        Spain: { flag: 'ðŸ‡ªðŸ‡¸', code: 'ES' },
        Ethiopia: { flag: 'ðŸ‡ªðŸ‡¹', code: 'ET' },
        'European Union': { flag: 'ðŸ‡ªðŸ‡º', code: 'EU' },
        Finland: { flag: 'ðŸ‡«ðŸ‡®', code: 'FI' },
        Fiji: { flag: 'ðŸ‡«ðŸ‡¯', code: 'FJ' },
        'Falkland Islands (Malvinas)': { flag: 'ðŸ‡«ðŸ‡°', code: 'FK' },
        Micronesia: { flag: 'ðŸ‡«ðŸ‡²', code: 'FM' },
        'Faroe Islands': { flag: 'ðŸ‡«ðŸ‡´', code: 'FO' },
        France: { flag: 'ðŸ‡«ðŸ‡·', code: 'FR' },
        Gabon: { flag: 'ðŸ‡¬ðŸ‡¦', code: 'GA' },
        'United Kingdom': { flag: 'ðŸ‡¬ðŸ‡§', code: 'GB' },
        Grenada: { flag: 'ðŸ‡¬ðŸ‡©', code: 'GD' },
        Georgia: { flag: 'ðŸ‡¬ðŸ‡ª', code: 'GE' },
        'French Guiana': { flag: 'ðŸ‡¬ðŸ‡«', code: 'GF' },
        Guernsey: { flag: 'ðŸ‡¬ðŸ‡¬', code: 'GG' },
        Ghana: { flag: 'ðŸ‡¬ðŸ‡­', code: 'GH' },
        Gibraltar: { flag: 'ðŸ‡¬ðŸ‡®', code: 'GI' },
        Greenland: { flag: 'ðŸ‡¬ðŸ‡±', code: 'GL' },
        Gambia: { flag: 'ðŸ‡¬ðŸ‡²', code: 'GM' },
        Guinea: { flag: 'ðŸ‡¬ðŸ‡³', code: 'GN' },
        Guadeloupe: { flag: 'ðŸ‡¬ðŸ‡µ', code: 'GP' },
        'Equatorial Guinea': { flag: 'ðŸ‡¬ðŸ‡¶', code: 'GQ' },
        Greece: { flag: 'ðŸ‡¬ðŸ‡·', code: 'GR' },
        'South Georgia': { flag: 'ðŸ‡¬ðŸ‡¸', code: 'GS' },
        Guatemala: { flag: 'ðŸ‡¬ðŸ‡¹', code: 'GT' },
        Guam: { flag: 'ðŸ‡¬ðŸ‡º', code: 'GU' },
        'Guinea-Bissau': { flag: 'ðŸ‡¬ðŸ‡¼', code: 'GW' },
        Guyana: { flag: 'ðŸ‡¬ðŸ‡¾', code: 'GY' },
        'Hong Kong': { flag: 'ðŸ‡­ðŸ‡°', code: 'HK' },
        'Heard Island and Mcdonald Islands': { flag: 'ðŸ‡­ðŸ‡²', code: 'HM' },
        Honduras: { flag: 'ðŸ‡­ðŸ‡³', code: 'HN' },
        Croatia: { flag: 'ðŸ‡­ðŸ‡·', code: 'HR' },
        Haiti: { flag: 'ðŸ‡­ðŸ‡¹', code: 'HT' },
        Hungary: { flag: 'ðŸ‡­ðŸ‡º', code: 'HU' },
        Indonesia: { flag: 'ðŸ‡®ðŸ‡©', code: 'ID' },
        Ireland: { flag: 'ðŸ‡®ðŸ‡ª', code: 'IE' },
        Israel: { flag: 'ðŸ‡®ðŸ‡±', code: 'IL' },
        'Isle of Man': { flag: 'ðŸ‡®ðŸ‡²', code: 'IM' },
        India: { flag: 'ðŸ‡®ðŸ‡³', code: 'IN' },
        'British Indian Ocean Territory': { flag: 'ðŸ‡®ðŸ‡´', code: 'IO' },
        Iraq: { flag: 'ðŸ‡®ðŸ‡¶', code: 'IQ' },
        Iran: { flag: 'ðŸ‡®ðŸ‡·', code: 'IR' },
        Iceland: { flag: 'ðŸ‡®ðŸ‡¸', code: 'IS' },
        Italy: { flag: 'ðŸ‡®ðŸ‡¹', code: 'IT' },
        Jersey: { flag: 'ðŸ‡¯ðŸ‡ª', code: 'JE' },
        Jamaica: { flag: 'ðŸ‡¯ðŸ‡²', code: 'JM' },
        Jordan: { flag: 'ðŸ‡¯ðŸ‡´', code: 'JO' },
        Japan: { flag: 'ðŸ‡¯ðŸ‡µ', code: 'JP' },
        Kenya: { flag: 'ðŸ‡°ðŸ‡ª', code: 'KE' },
        Kyrgyzstan: { flag: 'ðŸ‡°ðŸ‡¬', code: 'KG' },
        Cambodia: { flag: 'ðŸ‡°ðŸ‡­', code: 'KH' },
        Kiribati: { flag: 'ðŸ‡°ðŸ‡®', code: 'KI' },
        Comoros: { flag: 'ðŸ‡°ðŸ‡²', code: 'KM' },
        'Saint Kitts and Nevis': { flag: 'ðŸ‡°ðŸ‡³', code: 'KN' },
        'North Korea': { flag: 'ðŸ‡°ðŸ‡µ', code: 'KP' },
        'Korea, South': { flag: 'ðŸ‡°ðŸ‡·', code: 'KR' },
        Kuwait: { flag: 'ðŸ‡°ðŸ‡¼', code: 'KW' },
        'Cayman Islands': { flag: 'ðŸ‡°ðŸ‡¾', code: 'KY' },
        Kazakhstan: { flag: 'ðŸ‡°ðŸ‡¿', code: 'KZ' },
        Laos: { flag: 'ðŸ‡±ðŸ‡¦', code: 'LA' },
        Lebanon: { flag: 'ðŸ‡±ðŸ‡§', code: 'LB' },
        'Saint Lucia': { flag: 'ðŸ‡±ðŸ‡¨', code: 'LC' },
        Liechtenstein: { flag: 'ðŸ‡±ðŸ‡®', code: 'LI' },
        'Sri Lanka': { flag: 'ðŸ‡±ðŸ‡°', code: 'LK' },
        Liberia: { flag: 'ðŸ‡±ðŸ‡·', code: 'LR' },
        Lesotho: { flag: 'ðŸ‡±ðŸ‡¸', code: 'LS' },
        Lithuania: { flag: 'ðŸ‡±ðŸ‡¹', code: 'LT' },
        Luxembourg: { flag: 'ðŸ‡±ðŸ‡º', code: 'LU' },
        Latvia: { flag: 'ðŸ‡±ðŸ‡»', code: 'LV' },
        Libya: { flag: 'ðŸ‡±ðŸ‡¾', code: 'LY' },
        Morocco: { flag: 'ðŸ‡²ðŸ‡¦', code: 'MA' },
        Monaco: { flag: 'ðŸ‡²ðŸ‡¨', code: 'MC' },
        Moldova: { flag: 'ðŸ‡²ðŸ‡©', code: 'MD' },
        Montenegro: { flag: 'ðŸ‡²ðŸ‡ª', code: 'ME' },
        'Saint Martin (French Part)': { flag: 'ðŸ‡²ðŸ‡«', code: 'MF' },
        Madagascar: { flag: 'ðŸ‡²ðŸ‡¬', code: 'MG' },
        'North Macedonia': { flag: 'ðŸ‡²ðŸ‡°', code: 'MK' },
        Mali: { flag: 'ðŸ‡²ðŸ‡±', code: 'ML' },
        Burma: { flag: 'ðŸ‡²ðŸ‡²', code: 'MM' },
        Mongolia: { flag: 'ðŸ‡²ðŸ‡³', code: 'MN' },
        Macao: { flag: 'ðŸ‡²ðŸ‡´', code: 'MO' },
        'Northern Mariana Islands': { flag: 'ðŸ‡²ðŸ‡µ', code: 'MP' },
        Martinique: { flag: 'ðŸ‡²ðŸ‡¶', code: 'MQ' },
        Mauritania: { flag: 'ðŸ‡²ðŸ‡·', code: 'MR' },
        Montserrat: { flag: 'ðŸ‡²ðŸ‡¸', code: 'MS' },
        Malta: { flag: 'ðŸ‡²ðŸ‡¹', code: 'MT' },
        Malawi: { flag: 'ðŸ‡²ðŸ‡¼', code: 'MW' },
        Mexico: { flag: 'ðŸ‡²ðŸ‡½', code: 'MX' },
        Malaysia: { flag: 'ðŸ‡²ðŸ‡¾', code: 'MY' },
        Mozambique: { flag: 'ðŸ‡²ðŸ‡¿', code: 'MZ' },
        Namibia: { flag: 'ðŸ‡³ðŸ‡¦', code: 'NA' },
        'New Caledonia': { flag: 'ðŸ‡³ðŸ‡¨', code: 'NC' },
        Niger: { flag: 'ðŸ‡³ðŸ‡ª', code: 'NE' },
        'Norfolk Island': { flag: 'ðŸ‡³ðŸ‡«', code: 'NF' },
        Nigeria: { flag: 'ðŸ‡³ðŸ‡¬', code: 'NG' },
        Nicaragua: { flag: 'ðŸ‡³ðŸ‡®', code: 'NI' },
        Netherlands: { flag: 'ðŸ‡³ðŸ‡±', code: 'NL' },
        Norway: { flag: 'ðŸ‡³ðŸ‡´', code: 'NO' },
        Nepal: { flag: 'ðŸ‡³ðŸ‡µ', code: 'NP' },
        Nauru: { flag: 'ðŸ‡³ðŸ‡·', code: 'NR' },
        Niue: { flag: 'ðŸ‡³ðŸ‡º', code: 'NU' },
        'New Zealand': { flag: 'ðŸ‡³ðŸ‡¿', code: 'NZ' },
        Oman: { flag: 'ðŸ‡´ðŸ‡²', code: 'OM' },
        Panama: { flag: 'ðŸ‡µðŸ‡¦', code: 'PA' },
        Peru: { flag: 'ðŸ‡µðŸ‡ª', code: 'PE' },
        'French Polynesia': { flag: 'ðŸ‡µðŸ‡«', code: 'PF' },
        'Papua New Guinea': { flag: 'ðŸ‡µðŸ‡¬', code: 'PG' },
        Philippines: { flag: 'ðŸ‡µðŸ‡­', code: 'PH' },
        Pakistan: { flag: 'ðŸ‡µðŸ‡°', code: 'PK' },
        Poland: { flag: 'ðŸ‡µðŸ‡±', code: 'PL' },
        'Saint Pierre and Miquelon': { flag: 'ðŸ‡µðŸ‡²', code: 'PM' },
        Pitcairn: { flag: 'ðŸ‡µðŸ‡³', code: 'PN' },
        'Puerto Rico': { flag: 'ðŸ‡µðŸ‡·', code: 'PR' },
        'Palestinian Territory': { flag: 'ðŸ‡µðŸ‡¸', code: 'PS' },
        Portugal: { flag: 'ðŸ‡µðŸ‡¹', code: 'PT' },
        Palau: { flag: 'ðŸ‡µðŸ‡¼', code: 'PW' },
        Paraguay: { flag: 'ðŸ‡µðŸ‡¾', code: 'PY' },
        Qatar: { flag: 'ðŸ‡¶ðŸ‡¦', code: 'QA' },
        RÃ©union: { flag: 'ðŸ‡·ðŸ‡ª', code: 'RE' },
        Romania: { flag: 'ðŸ‡·ðŸ‡´', code: 'RO' },
        Serbia: { flag: 'ðŸ‡·ðŸ‡¸', code: 'RS' },
        Russia: { flag: 'ðŸ‡·ðŸ‡º', code: 'RU' },
        Rwanda: { flag: 'ðŸ‡·ðŸ‡¼', code: 'RW' },
        'Saudi Arabia': { flag: 'ðŸ‡¸ðŸ‡¦', code: 'SA' },
        'Solomon Islands': { flag: 'ðŸ‡¸ðŸ‡§', code: 'SB' },
        Sudan: { flag: 'ðŸ‡¸ðŸ‡©', code: 'SD' },
        Sweden: { flag: 'ðŸ‡¸ðŸ‡ª', code: 'SE' },
        Singapore: { flag: 'ðŸ‡¸ðŸ‡¬', code: 'SG' },
        'Saint Helena, Ascension and Tristan Da Cunha': { flag: 'ðŸ‡¸ðŸ‡­', code: 'SH' },
        Slovenia: { flag: 'ðŸ‡¸ðŸ‡®', code: 'SI' },
        'Svalbard and Jan Mayen': { flag: 'ðŸ‡¸ðŸ‡¯', code: 'SJ' },
        Slovakia: { flag: 'ðŸ‡¸ðŸ‡°', code: 'SK' },
        'Sierra Leone': { flag: 'ðŸ‡¸ðŸ‡±', code: 'SL' },
        'San Marino': { flag: 'ðŸ‡¸ðŸ‡²', code: 'SM' },
        Senegal: { flag: 'ðŸ‡¸ðŸ‡³', code: 'SN' },
        Somalia: { flag: 'ðŸ‡¸ðŸ‡´', code: 'SO' },
        Suriname: { flag: 'ðŸ‡¸ðŸ‡·', code: 'SR' },
        'South Sudan': { flag: 'ðŸ‡¸ðŸ‡¸', code: 'SS' },
        'Sao Tome and Principe': { flag: 'ðŸ‡¸ðŸ‡¹', code: 'ST' },
        'El Salvador': { flag: 'ðŸ‡¸ðŸ‡»', code: 'SV' },
        'Sint Maarten (Dutch Part)': { flag: 'ðŸ‡¸ðŸ‡½', code: 'SX' },
        Syria: { flag: 'ðŸ‡¸ðŸ‡¾', code: 'SY' },
        Eswatini: { flag: 'ðŸ‡¸ðŸ‡¿', code: 'SZ' },
        'Turks and Caicos Islands': { flag: 'ðŸ‡¹ðŸ‡¨', code: 'TC' },
        Chad: { flag: 'ðŸ‡¹ðŸ‡©', code: 'TD' },
        'French Southern Territories': { flag: 'ðŸ‡¹ðŸ‡«', code: 'TF' },
        Togo: { flag: 'ðŸ‡¹ðŸ‡¬', code: 'TG' },
        Thailand: { flag: 'ðŸ‡¹ðŸ‡­', code: 'TH' },
        Tajikistan: { flag: 'ðŸ‡¹ðŸ‡¯', code: 'TJ' },
        Tokelau: { flag: 'ðŸ‡¹ðŸ‡°', code: 'TK' },
        'Timor-Leste': { flag: 'ðŸ‡¹ðŸ‡±', code: 'TP' },
        Turkmenistan: { flag: 'ðŸ‡¹ðŸ‡²', code: 'TM' },
        Tunisia: { flag: 'ðŸ‡¹ðŸ‡³', code: 'TN' },
        Tonga: { flag: 'ðŸ‡¹ðŸ‡´', code: 'TO' },
        Turkey: { flag: 'ðŸ‡¹ðŸ‡·', code: 'TR' },
        'Trinidad and Tobago': { flag: 'ðŸ‡¹ðŸ‡¹', code: 'TT' },
        Tuvalu: { flag: 'ðŸ‡¹ðŸ‡»', code: 'TV' },
        'Taiwan*': { flag: 'ðŸ‡¹ðŸ‡¼', code: 'TW' },
        Tanzania: { flag: 'ðŸ‡¹ðŸ‡¿', code: 'TZ' },
        Ukraine: { flag: 'ðŸ‡ºðŸ‡¦', code: 'UA' },
        Uganda: { flag: 'ðŸ‡ºðŸ‡¬', code: 'UG' },
        'United States Minor Outlying Islands': { flag: 'ðŸ‡ºðŸ‡²', code: 'UM' },
        US: { flag: 'ðŸ‡ºðŸ‡¸', code: 'US' },
        Uruguay: { flag: 'ðŸ‡ºðŸ‡¾', code: 'UY' },
        Uzbekistan: { flag: 'ðŸ‡ºðŸ‡¿', code: 'UZ' },
        'Saint Vincent and the Grenadines': { flag: 'ðŸ‡»ðŸ‡¨', code: 'VC' },
        Venezuela: { flag: 'ðŸ‡»ðŸ‡ª', code: 'VE' },
        'Virgin Islands, British': { flag: 'ðŸ‡»ðŸ‡¬', code: 'VG' },
        'Virgin Islands, U.S.': { flag: 'ðŸ‡»ðŸ‡®', code: 'VI' },
        Vietnam: { flag: 'ðŸ‡»ðŸ‡³', code: 'VN' },
        Vanuatu: { flag: 'ðŸ‡»ðŸ‡º', code: 'VU' },
        'Wallis and Futuna': { flag: 'ðŸ‡¼ðŸ‡«', code: 'WF' },
        Samoa: { flag: 'ðŸ‡¼ðŸ‡¸', code: 'WS' },
        Kosovo: { flag: 'ðŸ‡½ðŸ‡°', code: 'XK' },
        Yemen: { flag: 'ðŸ‡¾ðŸ‡ª', code: 'YE' },
        Mayotte: { flag: 'ðŸ‡¾ðŸ‡¹', code: 'YT' },
        'South Africa': { flag: 'ðŸ‡¿ðŸ‡¦', code: 'ZA' },
        Zambia: { flag: 'ðŸ‡¿ðŸ‡²', code: 'ZM' },
        Zimbabwe: { flag: 'ðŸ‡¿ðŸ‡¼', code: 'ZW' },
      };
      var countriesKeys = Object.keys(countriesInfo);
      var selectedBeforeSummary;
      var confirmedPalette = JSC.colorToPalette(tooltipPalette[0], { lightness: 0.6 }, 8, 0).reverse().slice(0, 7);
      var activePalette = JSC.colorToPalette(tooltipPalette[1], { lightness: 0.8 }, 7, 0).reverse().slice(0, 7);
      var recoveredPalette = JSC.colorToPalette(tooltipPalette[2], { lightness: 1 }, 7, 0).reverse().slice(0, 6);
      var deathsPalette = JSC.colorToPalette(tooltipPalette[3], { lightness: 0.8 }, 7, 0).reverse().slice(0, 6);
      var tabs = ['Active', 'Recovered', 'Deaths'];
      var timer;

      makeBubbleScatter();
      function makeBubbleScatter() {
        var data;
        var chart, map;
        var mapSerId = 'mapSerTime';
        var startDate, endDate, currentDate;
        var lastSliderVal;
        var racebarColorLookup = {};

        /*	var chartTitleOptions = {		fontSize: '16px',		autoWrap: 'wrap'	};*/
        var palette = confirmedPalette;
        var selectedType = 'Active';
        var bubbleSizeBy = 'Deaths';
        var selectedCountries = ['US', 'BR', 'RU'];
        updateColors(selectedCountries);
        var isPlaying;
        if (!chart) {
          JSC.fetch('https://raw.githubusercontent.com/datasets/covid-19/master/data/countries-aggregated.csv')
            .then(function (response) {
              return response.text();
            })
            .then(function (text) {
              data = JSC.csv2Json(text, {
                coerce: function (d, i) {
                  return {
                    Date: +new Date(d.Date),
                    Country: d.Country,
                    Confirmed: +d.Confirmed,
                    Active: d.Confirmed - d.Recovered - d.Deaths,
                    Recovered: +d.Recovered,
                    Deaths: +d.Deaths,
                  };
                },
              });
              JSC.fetch(
                'https://raw.githubusercontent.com/datasets/covid-19/master/data/time-series-19-covid-combined.csv'
              )
                .then(function (response) {
                  return response.text();
                })
                .then(function (text) {
                  var greenlandData = JSC.csv2Json(text, {
                    coerce: function (d, i) {
                      return {
                        Date: +new Date(d.Date),
                        Country: d['Province/State'],
                        Confirmed: +d.Confirmed,
                        Active: d.Confirmed - d.Recovered - d.Deaths,
                        Recovered: +d.Recovered,
                        Deaths: +d.Deaths,
                      };
                    },
                  }).filter(function (x) {
                    return x.Country === 'Greenland';
                  });
                  data = data.concat(greenlandData);
                  startDate = JSC.formatDate(data[0].Date, 'd');
                  endDate = JSC.formatDate(data[data.length - 1].Date, 'd');
                  var emptyCounties = ['Turkmenistan', 'North Korea', 'Lesotho'];
                  emptyCounties.forEach(function (item) {
                    if (data.find((x) => x.id === item) === undefined) {
                      for (var i = new Date(startDate); i <= new Date(endDate); i = addDays(i, 1)) {
                        data.push({
                          Date: i,
                          Country: item,
                          Confirmed: 0,
                          Active: 0,
                          Recovered: 0,
                          Deaths: 0,
                        });
                      }
                    }
                  });
                  currentDate = endDate;
                  chart = renderChart(data, function (chrt) {
                    map = renderMap(data);
                    playPause(true, data, chrt);
                  });
                });
            });
        }

        function renderMap(data) {
          var unselectTimer;
          var chartRendered;
          return JSC.chart(
            'mapDiv3',
            {
              type: 'map solid',
              animation_duration: 0,
              defaultSeries: {
                pointSelection: 'multiple',
                shape: { padding: -0.01 },
              },
              legend: {
                position: 'bottom',
                template: '%icon,%name',
                defaultEntry: {
                  iconWidth: 10,
                  style_fontSize: 10,
                },
                customEntries: makeMapLegendEntries(activePalette),
              },
              events_pointSelectionChanged: function (items) {
                var ids = items.map(function (item) {
                  return item.id;
                });
                selectedCountries = ids;
                this.uiItems('global').options({ visible: ids.length > 1 });
                document.getElementById('chartTitle3').innerHTML = makeTitle(
                  JSC.formatDate(currentDate, 'm'),
                  (ids.length < 6 ? idsToNames(ids) : idsToFlags(ids)).join(', ')
                );
                chart.series(0).options({ points: makeChartSeries(data)[0].points });
              },
              annotations: [
                {
                  position: 'inside top left',
                  fill: 'white',
                  label: {
                    text: 'Select countries to compare:',
                    style: { fontSize: '16px' },
                  },
                },
              ],
              palette: makeSmartPalette(activePalette, 'active'),
              defaultPoint: {
                tooltip:
                  '<b>%name</b><br>' +
                  'Confirmed: <b><span style="color:' +
                  tooltipPalette[0] +
                  '">%confirmed</span></b><br>' +
                  'Active: <b><span style="color:' +
                  tooltipPalette[1] +
                  '">%active</span></b><br>' +
                  'Recovered: <b><span style="color:' +
                  tooltipPalette[2] +
                  '">%recovered</span></b><br>' +
                  'Deaths: <b><span style="color:' +
                  tooltipPalette[3] +
                  '">%deaths</span></b>',
                outline: { color: 'white', width: 0.5 },
                focusGlow_width: 0,
                states: {
                  hover: { fill: 'currentColor', outline: { color: 'black', width: 1 } },
                  select: { enabled: true, fill: 'currentColor', outline: { color: 'black', width: 1 } },
                },
              },
              series: makeMapSeries(data, mapSerId),
              toolbar_items: {
                resetZoom_position: 'inside bottom left',
                caseTypes: {
                  items: generateButtons(),
                  value: 'Active',
                  position: 'outside top',
                  boxVisible: false,
                  label_text: '',
                  width: 280,
                  margin: 5,
                  itemsBox: {
                    layout: 'horizontal',
                    visible: true,
                    margin_top: 5,
                  },
                  defaultItem: {
                    type: 'radio',
                    position: 'top',
                    icon_visible: false,
                    padding: [6, 12, 6, -8],
                    margin: 0,
                    outline_width: 0,
                    fill: '#F5F5F5',
                    label_color: '#BDBDBD',
                    states_select: { label_color: 'white' },
                    states_hover: { label_color: 'white' },
                  },
                  events: {
                    change: function (val) {
                      selectedType = val;
                      playPause(true, data);
                      updateChart(data, val);
                      map.redraw();
                    },
                  },
                },
                global: {
                  type: 'button',
                  visible: false,
                  label: { text: 'Clear', style_fontSize: '14px' },
                  fill: 'white',
                  padding: [4, 8],
                  events_click: function () {
                    map.series(0).points().options({ selected: false });
                  },
                },
              },
            },
            function (c) {
              chartRendered = true;
              var series = c.series(0);
              selectedCountries.forEach(function (item, i) {
                series
                  .points(function (p) {
                    return p.options('id') === item;
                  })
                  .options({ selected: true }, i === selectedCountries.length - 1);
              });
            }
          );
        }

        function renderChart(data, cb) {
          document.getElementById('chartTitle3').innerHTML = makeTitle(
            JSC.formatDate(currentDate, 'm'),
            idsToNames(selectedCountries)
          );
          var chartSeries = makeChartSeries(data);
          return JSC.chart(
            'chartDiv3',
            {
              type: 'bubble',
              // margin_top:40,
              palette: [tooltipPalette[0]],
              legend: { visible: false },
              events_pointSelectionChanged: function (items) {
                var ids = items.map(function (item) {
                  return item.id;
                });
                selectedCountries = ids;
                document.getElementById('chartTitle3').innerHTML = makeTitle(
                  JSC.formatDate(currentDate, 'm'),
                  (ids.length < 6 ? idsToNames(ids) : idsToFlags(ids)).join(', ')
                );
                this.series(0).options({ points: makeChartSeries(data)[0].points });
                map.uiItems('global').options({ visible: ids.length > 1 });
                map.series(0).points().options({ selected: false });
                ids.forEach(function (id) {
                  map.series(0).points(id).options({ selected: true });
                });
              },
              defaultPoint: {
                outline_width: 0,
                legendEntry_visible: false,
                label: { text: '%name', style_fontSize: '14px' },
                tooltip:
                  '<b>%name</b><br>' +
                  'Confirmed: <b><span style="color:' +
                  tooltipPalette[0] +
                  '">%confirmed</span></b><br>' +
                  'Active: <b><span style="color:' +
                  tooltipPalette[1] +
                  '">%active</span></b><br>' +
                  'Recovered: <b><span style="color:' +
                  tooltipPalette[2] +
                  '">%recovered</span></b><br>' +
                  'Deaths: <b><span style="color:' +
                  tooltipPalette[3] +
                  '">%deaths</span></b>',
                states_select: {
                  opacity: 1,
                  fill: 'currentColor',
                },
              },
              yAxis: {
                label_text: 'Confirmed cases',
                alternateGridFill: 'none',
                formatString: 'a',
                scale_type: 'logarithmic',
              },
              xAxis: {
                label_text: selectedType + ' cases %',
                defaultTick_label_text: '%value%',
                scale_range: [0, 100],
              },
              defaultSeries: {
                legendEntry_visible: false,
                pointSelection: 'multiple',
                palette: 'default',
              },
              series: chartSeries,
              toolbar_items: {
                zoom_visible: false,
                label: {
                  label: {
                    text: 'Bubble size: ',
                    style_fontSize: 14,
                  },
                  margin_bottom: 44,
                  position: 'top left',
                  boxVisible: false,
                },
                bubbleSize: {
                  type: 'select',
                  position: 'top left',
                  items: tabs.join(','),
                  value: bubbleSizeBy,
                  margin_bottom: 44,
                  label_style_fontSize: 14,
                  events_change: function (val) {
                    bubbleSizeBy = val;
                    var chartSeries = makeChartSeries(data);
                    setTimeout(function () {
                      chart.series(0).points(chartSeries[0].points);
                    }, 20);
                  },
                },
                logScale: {
                  type: 'toggle',
                  position: 'inside top right',
                  value: true,
                  label_text: 'Logarithmic',
                  events_change: function (val) {
                    chart.axes('y').options({ scale_type: val ? 'logarithmic' : 'auto' });
                  },
                },
                sliderWrapper: {
                  itemsBox_visible: false,
                  position: 'inside top left',
                  offset: '0,-42',
                  boxVisible: false,
                  label_text: '',
                  itemsBox: { visible: true },
                  defaultItem: { boxVisible: false },
                  items: {
                    slider: {
                      type: 'range',
                      width: 180,
                      throttle: 0,
                      value: new Date(currentDate).getTime(),
                      min: new Date(startDate).getTime(),
                      max: new Date(endDate).getTime(),
                      events_change: function (val) {
                        if (lastSliderVal === val) {
                          return;
                        }
                        updateSliderTitle(val);
                        if (!isPlaying) {
                          updateFromSlider(val, data);
                        } else {
                          moveSlider(val, data);
                          playPause(true, data);
                        }

                        resizeDivs();
                        lastSliderVal = val;
                      },
                      itemsBox: { visible: true },
                    },
                    Stop: {
                      type: 'option',
                      height: 20,
                      value: false,
                      margin: [6, 6, 6, 16],
                      icon_name: 'system/default/pause',
                      icon_size: 20,
                      label_text: '',
                      events_change: function (val) {
                        playPause(val, data);
                      },
                    },
                  },
                },
              },
            },
            cb
          );
        }

        function makeMapSeries(data, id) {
          var series = JSC.nest()
            .key('Country')
            .pointRollup(function (key, val) {
              var values = val[0];
              return {
                map: getCountryCode(key),
                id: getCountryCode(key),
                z: values[selectedType],
                attributes: {
                  confirmed: values.Confirmed,
                  active: values.Active,
                  recovered: values.Recovered,
                  deaths: values.Deaths,
                  deathRate:
                    values.Confirmed >= 1000
                      ? JSC.formatNumber((values.Deaths / values.Confirmed) * 100, 'n2') + '%'
                      : 'not enough data',
                },
              };
            })
            .series(
              data.filter(function (x) {
                return formatDateCached(x.Date) === currentDate && countriesInfo[x.Country] !== undefined;
              })
            );
          if (id) {
            series.id = id;
          }
          return series;
        }

        function makeUpdateMapSeries(data, id) {
          var series = JSC.nest()
            .key('Country')
            .pointRollup(function (key, val) {
              var values = val[0];
              return {
                id: getCountryCode(key),
                z: values[selectedType],
                attributes: {
                  confirmed: values.Confirmed,
                  active: values.Active,
                  recovered: values.Recovered,
                  deaths: values.Deaths,
                  deathRate:
                    values.Confirmed >= 1000
                      ? JSC.formatNumber((values.Deaths / values.Confirmed) * 100, 'n2') + '%'
                      : 'not enough data',
                },
              };
            })
            .series(
              data.filter(function (x) {
                return countriesInfo[x.Country] !== undefined && formatDateCached(x.Date) === currentDate;
                //return countriesInfo[x.Country] !== undefined && JSC.formatDate(x.Date, 'd') === currentDate;
              })
            );
          if (id) {
            series.id = id;
          }
          return series;
        }

        function makeChartSeries(data) {
          var series = [
            {
              points: JSC.nest()
                .key('Country')
                .pointRollup(function (key, val) {
                  var values = val[0];
                  var result = {
                    selected: false,
                    name: values.Country,
                    opacity: 0.5,
                    color: '#b0b0b0',
                    label_visible: false,
                    x: (values[selectedType] / values.Confirmed) * 100,
                    y: +values.Confirmed,
                    z: +values[bubbleSizeBy],
                    id: getCountryCode(key),
                    attributes: {
                      confirmed: values.Confirmed,
                      active: values.Active,
                      recovered: values.Recovered,
                      deaths: values.Deaths,
                    },
                  };
                  selectedCountries.forEach(function (item, i) {
                    if (getCountryCode(key) === item) {
                      result.selected = true;
                      result.color = getRaceBarColor(values.Country);
                      result.opacity = 1;
                      result.label_visible = true;
                    }
                  });
                  return result;
                })
                .points(
                  data.filter(function (x) {
                    return (
                      formatDateCached(x.Date) === currentDate &&
                      countriesInfo[x.Country] !== undefined &&
                      x.Confirmed !== 0
                    );
                  })
                ),
            },
          ];
          series.forEach(function (item, i) {
            item.points = item.points.filter(function (x) {
              return x !== undefined && x !== null;
            });
          });
          return series;
        }

        function updateChart(data, type) {
          var entries, palette;
          switch (type) {
            case 'Confirmed':
              entries = makeMapLegendEntries(confirmedPalette);
              palette = makeSmartPalette(confirmedPalette, 'confirmed');
              chart.options({ palette: [tooltipPalette[0]] }, false);
              break;
            case 'Active':
              entries = makeMapLegendEntries(activePalette);
              palette = makeSmartPalette(activePalette, 'active');
              chart.options({ palette: [tooltipPalette[1]] }, false);
              break;
            case 'Recovered':
              entries = makeMapLegendEntries(recoveredPalette);
              palette = makeSmartPalette(recoveredPalette, 'recovered');
              chart.options({ palette: [tooltipPalette[2]] }, false);
              break;
            case 'Deaths':
              entries = makeMapLegendEntries(deathsPalette);
              palette = makeSmartPalette(deathsPalette, 'deaths');
              chart.options({ palette: [tooltipPalette[3]] }, false);

              break;
          }
          map.options({ palette: palette });
          map.legends(0).entries().remove(false);
          map.legends(0).options({ customEntries: entries });
          if (map.legends(0).entries().items.length > entries.length) {
            map.legends(0).entries(7).remove();
          }

          document.getElementById('chartTitle3').innerHTML = makeTitle(
            JSC.formatDate(currentDate, 'm'),
            (selectedCountries.length < 6 ? idsToNames(selectedCountries) : idsToFlags(selectedCountries)).join(', ')
          );

          var chartSeries = makeChartSeries(data);
          chart.axes('x').options({ label_text: type + ' cases %' });
          setTimeout(function () {
            chart.series(0).points(chartSeries[0].points);
          }, 20);
        }

        function updateSliderTitle(date) {
          currentDate = JSC.formatDate(
            new Date(new Date(date).getFullYear(), new Date(date).getMonth(), new Date(date).getDate()),
            'd'
          );
          document.getElementById('chartTitle3').innerHTML = makeTitle(
            JSC.formatDate(currentDate, 'm'),
            (selectedCountries.length < 6 ? idsToNames(selectedCountries) : idsToFlags(selectedCountries)).join(', ')
          );
        }

        function moveSlider(date, data) {
          currentDate = JSC.formatDate(
            new Date(new Date(date).getFullYear(), new Date(date).getMonth(), new Date(date).getDate()),
            'd'
          );

          chart.uiItems('slider').options({ value: new Date(currentDate).getTime() });

          updateFromSlider(date, data);
        }

        function updateFromSlider(date, data) {
          currentDate = JSC.formatDate(
            new Date(new Date(date).getFullYear(), new Date(date).getMonth(), new Date(date).getDate()),
            'd'
          );

          var mapSeries = makeUpdateMapSeries(data, mapSerId);
          var chartSeries = makeChartSeries(data);
          map.series(0).options({ points: mapSeries[0].points });
          setTimeout(function () {
            chart.series(0).options({ points: chartSeries[0].points });
          }, 20);
        }

        function animateChart(data) {
          clearInterval(timer);
          timer = setInterval(function () {
            if (new Date(currentDate).getTime() < new Date(endDate).getTime()) {
              currentDate = addDays(currentDate, 1);
              //moveSlider(currentDate, data);
              chart.uiItems('slider').options({ value: new Date(currentDate).getTime() });
              document.getElementById('chartTitle3').innerHTML = makeTitle(
                JSC.formatDate(currentDate, 'm'),
                (selectedCountries.length < 6 ? idsToNames(selectedCountries) : idsToFlags(selectedCountries)).join(
                  ', '
                )
              );
              updateFromSlider(currentDate, data);
            } else {
              playPause(true, data);
            }
          }, 800);
        }

        function playPause(val, data, chrt) {
          var c = chrt || chart;
          if (val) {
            c.uiItems('Stop').options({ label_text: 'Play', icon_name: 'system/default/play', value: val });
            clearInterval(timer);
            isPlaying = false;
          } else {
            c.uiItems('Stop').options({ label_text: 'Pause', icon_name: 'system/default/pause', value: val });
            isPlaying = true;
            var startDateNum = new Date(startDate).getTime(),
              endDateNum = new Date(endDate).getTime();
            if (new Date(currentDate).getTime() === endDateNum) {
              //middle
              var midDateNum = (startDateNum + endDateNum) / 2;

              currentDate = new Date(midDateNum);
              c.uiItems('slider').options({ value: new Date(midDateNum).getTime() });
            }

            animateChart(data);
          }
        }

        function makeTitle(date, country) {
          return 'COVID-19 ' + colorTypeText(selectedType) + ': <b>' + date + '</b><br>' + '<b>' + country + '</b>';
        }
        function updateColors(ids) {
          var colors = JSC.getPalette(0);
          racebarColorLookup = {};
          ids.forEach(function (id, i) {
            racebarColorLookup[id] = colors[i % colors.length];
          });
        }
        function getRaceBarColor(id) {
          if (id.length > 2 && countriesInfo[id]) {
            id = countriesInfo[id].code;
          }
          return racebarColorLookup[id];
        }
      }

      function addDays(date, days) {
        return new Date(date).setDate(new Date(date).getDate() + days);
      }

      function formatDateCached(num) {
        if (!dateCache[num]) {
          dateCache[num] = JSC.formatDate(num, 'd');
        }
        return dateCache[num];
      }
      function colorTypeText(type) {
        var typeToColor = {
          Confirmed: tooltipPalette[0],
          Active: tooltipPalette[1],
          Recovered: tooltipPalette[2],
          Deaths: tooltipPalette[3],
        };
        return (
          '<span style="color:' + typeToColor[type] + '">' + type + '</span>' + (type !== 'Deaths' ? ' Cases' : '')
        );
      }
      function getCountryCode(country) {
        return countriesInfo[country] === undefined ? undefined : countriesInfo[country].code;
      }
      function makeSmartPalette(palette, name) {
        var smartPalette = {
          pointValue: (p) => p.options('attributes_' + name),
          ranges: [{ value: 0, color: '#E0E0E0', legendEntry_visible: false }],
        };
        palette.forEach(function (item, i) {
          smartPalette.ranges.push({
            value: [Math.pow(10, i), Math.pow(10, i + 1) - 1],
            color: item,
            legendEntry_visible: false,
          });
        });
        return smartPalette;
      }

      function makeMapLegendEntries(palette) {
        var customEntries = [{ id: 'e0', name: '0', icon_color: '#E0E0E0' }];
        palette.forEach(function (item, i) {
          var result = {
            id: 'e' + i,
            name: JSC.formatNumber(Math.pow(10, i), 'a') + ' - ' + JSC.formatNumber(Math.pow(10, i + 1), 'a'),
            icon_color: item,
          };
          if (i === palette.length - 1) {
            result = {
              id: 'e' + i,
              name: JSC.formatNumber(Math.pow(10, i), 'a') + '+',
              icon_color: item,
            };
          }
          customEntries.push(result);
        });
        return customEntries;
      }
      function generateButtons() {
        var buttons = {};
        tabs.forEach(function (item, i) {
          buttons[item] = {
            label_text: item,
            states: {
              select: { fill: tooltipPalette[i + 1] },
              hover: { fill: tooltipPalette[i + 1] },
            },
          };
        });
        return buttons;
      }
      function idsToNames(ids) {
        return ids.map(function (id) {
          var found = countriesKeys.find(function (key) {
            if (countriesInfo[key].code === id) {
              return key;
            }
          });
          return found || id;
        });
      }

      function idsToFlags(ids) {
        return ids.map(function (id) {
          var fnd;
          var found = countriesKeys.find(function (key) {
            if (countriesInfo[key].code === id) {
              fnd = countriesInfo[key].flag;
              return countriesInfo[key].flag;
            }
          });
          return fnd || found || id;
        });
      }
      function resizeDivs() {
        document.getElementById('chartDiv3').style.height =
          document.getElementById('firstChartWrapper3').offsetHeight -
          document.getElementById('chartTitle3').offsetHeight +
          'px';
      }
    </script>
  </body>
</html>
